# グンペイ[GUNPAY] の概要
## 概要
シン・エヴァンゲリオンにてアスカが遊んでいたゲーム。
C言語で実装する。第一目標はCUI。
## 詳細
### プレイスペース
外観：W5ｘH10  
配列：W11 x H10
```
配列　　　　　表示
50505050505　 ・ ・ ・ ・ ・  
50505050505　 ・ ・ ・ ・ ・ 
50505050505　 ・ ・ ・ ・ ・ 
50505050505　 ・ ・ ・ ・ ・ 
50505050505　 ・ ・ ・ ・ ・ 
50506261505　 ・ ・[＼]／ ・ 
50516360505　 ・ ／[＿]・ ・ 
50545050505　 ・ ￣ ・ ・ ・ 
50505050505　 ・ ・ ・ ・ ・ 
50505050505　 ・ ・ ・ ・ ・ 
```

### 判定用配列
配列：W5 x H10
```
00000
00000
00000
00000
00000
00210
01300
04000
00000
00000
```
### 削除用配列
配列：W5 x H10
```
00000
00000
00000
00000
00000
00000
00000
00000
00000
00000
```

### 操作
|キー|操作|
|:---:|:---:|
|w|上へ移動|
|a|左へ移動|
|s|下へ移動|
|d|右へ移動|
|x|入れ替え|

```
操作はxにおいての偶数番目にかかわる
```
### 判定
手順
1. プレイスペースの配列を判定用配列にコピーする。
2. 接続の確認は"判定用配列"より行う
3. 左上から行う（判定用の要素数任意のリスト[現在の座標・接続の向きを収納]を作る）
    1. 左の壁に接してる線を探す（"1"にする）
    2. その線の右上・右・右下（線の種類による）の接続を確認する
    3. ひとつ右に進める（2.で接続が確認されたらリストに収納する。）ならば進む（リストから削除）進む前にいた座標を"1"にする（ただし、進んだ先が1であれば移動しない）
    4. 途中で進むことができなくなった場合。分岐後に（または左の壁から）進んだ分の線のステータスを"1"→"0"にする
    4. 2.～4.を繰り返す（リストの要素がなくなるまで）
    5. 1.を一つ下について確認する
4. "削除用配列"のステータスが"1"である座標を削除する。
### ゲームモード
エンドレスモード（ゲーム終了＝ゲームーバー）のみ
### アイテム
| 記号 | 番号 | 備考 |
|:---:|:---:|:---:|
|・|0|空|
|／|1||
|＼|2||
|＿|3||
|￣|4||
| |5|操作部（空）|
|[　]|6|操作カーソル|
### ゲーム進行
1. プレイスペース作成
2. 初期化
3. ループ開始
4. ゲームオーバー判定
5. 消去判定
6. 操作
7. 最下段に新ブロック挿入（１定時間が経過した後
）
## 記事
- [Wikipedia の 「GUNPAY」](https://ja.wikipedia.org/wiki/GUNPEY)
- [ゲームカタログ＠wiki](https://w.atwiki.jp/gcmatome/pages/4576.html)
- [ブログ](https://www.retroboydiary.com/entry/2018/07/09/173000)
- [ゲームのトリセツ？(PDF)](http://www.oldiesrising.com/noticespdfV2/Bandai%20Wonderswan/GunPey.pdf)


 